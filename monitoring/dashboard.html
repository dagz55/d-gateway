<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zignal System Health Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f0f0f;
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 1px solid #333;
            padding-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #00d4ff, #ff6b6b);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            color: #888;
            font-size: 1.1rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: #00d4ff;
            transform: translateY(-2px);
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .status-healthy { background: #4ade80; }
        .status-warning { background: #fbbf24; }
        .status-critical { background: #ef4444; }
        .status-unknown { background: #6b7280; }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #2a2a2a;
        }

        .metric:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .metric-label {
            color: #ccc;
            font-size: 0.9rem;
        }

        .metric-value {
            font-weight: 600;
            font-size: 1rem;
        }

        .progress-bar {
            width: 60px;
            height: 6px;
            background: #333;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            transition: width 0.3s ease;
        }

        .fill-low { background: #4ade80; }
        .fill-medium { background: #fbbf24; }
        .fill-high { background: #ef4444; }

        .agents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .agent-card {
            background: #262626;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid #4ade80;
        }

        .agent-card.warning {
            border-left-color: #fbbf24;
        }

        .agent-card.critical {
            border-left-color: #ef4444;
        }

        .agent-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .agent-status {
            font-size: 0.85rem;
            color: #aaa;
        }

        .alerts-section {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .alert-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: #262626;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .alert-item:last-child {
            margin-bottom: 0;
        }

        .alert-icon {
            font-size: 1.2rem;
        }

        .alert-content {
            flex: 1;
        }

        .alert-message {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .alert-time {
            font-size: 0.8rem;
            color: #888;
        }

        .refresh-btn {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px auto;
            display: block;
        }

        .refresh-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 212, 255, 0.3);
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #333;
            color: #666;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üõ°Ô∏è System Health Dashboard</h1>
        <p>Zignal Trading Platform Monitoring System</p>
    </div>

    <div class="dashboard-grid">
        <div class="card">
            <div class="card-title">
                <div class="status-indicator status-healthy" id="system-status"></div>
                System Resources
            </div>
            <div class="metric">
                <span class="metric-label">CPU Usage</span>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span class="metric-value" id="cpu-value">---%</span>
                    <div class="progress-bar">
                        <div class="progress-fill fill-low" id="cpu-progress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="metric">
                <span class="metric-label">Memory Usage</span>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span class="metric-value" id="memory-value">---%</span>
                    <div class="progress-bar">
                        <div class="progress-fill fill-low" id="memory-progress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="metric">
                <span class="metric-label">Disk Usage</span>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span class="metric-value" id="disk-value">---%</span>
                    <div class="progress-bar">
                        <div class="progress-fill fill-low" id="disk-progress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="metric">
                <span class="metric-label">Load Average</span>
                <span class="metric-value" id="load-value">--, --, --</span>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <div class="status-indicator status-healthy" id="servers-status"></div>
                Server Health
            </div>
            <div class="metric">
                <span class="metric-label">Main App (:3000)</span>
                <span class="metric-value" id="server-3000">üîç Checking...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Production (:3001)</span>
                <span class="metric-value" id="server-3001">üîç Checking...</span>
            </div>
            <div class="metric">
                <span class="metric-label">QA (:3002)</span>
                <span class="metric-value" id="server-3002">üîç Checking...</span>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <div class="status-indicator status-healthy" id="performance-status"></div>
                Performance
            </div>
            <div class="metric">
                <span class="metric-label">Avg Response Time</span>
                <span class="metric-value" id="response-time">--- ms</span>
            </div>
            <div class="metric">
                <span class="metric-label">Error Rate</span>
                <span class="metric-value" id="error-rate">---%</span>
            </div>
            <div class="metric">
                <span class="metric-label">Requests/min</span>
                <span class="metric-value" id="requests-per-min">---</span>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <div class="status-indicator status-healthy" id="security-status"></div>
                Security
            </div>
            <div class="metric">
                <span class="metric-label">Security Events</span>
                <span class="metric-value" id="security-events">---</span>
            </div>
            <div class="metric">
                <span class="metric-label">Failed Logins</span>
                <span class="metric-value" id="failed-logins">---</span>
            </div>
            <div class="metric">
                <span class="metric-label">Blocked IPs</span>
                <span class="metric-value" id="blocked-ips">---</span>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-title">
            <div class="status-indicator status-healthy" id="agents-status"></div>
            Monitoring Agents
        </div>
        <div class="agents-grid" id="agents-grid">
            <div class="agent-card">
                <div class="agent-name">System Health Oversight</div>
                <div class="agent-status">üîç Checking...</div>
            </div>
            <div class="agent-card">
                <div class="agent-name">Performance Monitor</div>
                <div class="agent-status">üîç Checking...</div>
            </div>
            <div class="agent-card">
                <div class="agent-name">Error Tracker</div>
                <div class="agent-status">üîç Checking...</div>
            </div>
            <div class="agent-card">
                <div class="agent-name">Security Monitor</div>
                <div class="agent-status">üîç Checking...</div>
            </div>
        </div>
    </div>

    <div class="alerts-section">
        <div class="card-title">
            <div class="status-indicator status-healthy" id="alerts-status"></div>
            Recent Alerts
        </div>
        <div id="alerts-container">
            <div class="alert-item">
                <div class="alert-icon">‚ÑπÔ∏è</div>
                <div class="alert-content">
                    <div class="alert-message">No recent alerts - System operating normally</div>
                    <div class="alert-time">System initialized</div>
                </div>
            </div>
        </div>
    </div>

    <button class="refresh-btn" onclick="refreshDashboard()">üîÑ Refresh Dashboard</button>

    <div class="footer">
        <p>Zignal System Health Dashboard | Last updated: <span id="last-updated">--</span></p>
        <p>Monitoring system provides real-time oversight of system health, performance, and security</p>
    </div>

    <script>
        // Mock data for demonstration
        function generateMockData() {
            return {
                system: {
                    cpu: Math.random() * 30 + 10, // 10-40%
                    memory: Math.random() * 20 + 50, // 50-70%
                    disk: Math.random() * 15 + 30, // 30-45%
                    loadAvg: [
                        (Math.random() * 2).toFixed(2),
                        (Math.random() * 2).toFixed(2),
                        (Math.random() * 2).toFixed(2)
                    ]
                },
                servers: {
                    3000: Math.random() > 0.1 ? 'healthy' : 'down',
                    3001: Math.random() > 0.2 ? 'healthy' : 'down',
                    3002: Math.random() > 0.3 ? 'healthy' : 'down'
                },
                performance: {
                    responseTime: Math.floor(Math.random() * 500 + 200), // 200-700ms
                    errorRate: (Math.random() * 3).toFixed(1), // 0-3%
                    requestsPerMin: Math.floor(Math.random() * 100 + 50) // 50-150
                },
                security: {
                    events: Math.floor(Math.random() * 5),
                    failedLogins: Math.floor(Math.random() * 3),
                    blockedIps: Math.floor(Math.random() * 2)
                },
                agents: [
                    { name: 'System Health Oversight', status: 'running', uptime: '2h 45m' },
                    { name: 'Performance Monitor', status: 'running', uptime: '2h 43m' },
                    { name: 'Error Tracker', status: 'running', uptime: '2h 41m' },
                    { name: 'Security Monitor', status: Math.random() > 0.1 ? 'running' : 'warning', uptime: '2h 39m' }
                ]
            };
        }

        function updateProgressBar(elementId, value, max = 100) {
            const progressBar = document.getElementById(elementId);
            const percentage = Math.min((value / max) * 100, 100);

            progressBar.style.width = percentage + '%';

            // Update color based on value
            progressBar.className = 'progress-fill';
            if (percentage < 50) {
                progressBar.classList.add('fill-low');
            } else if (percentage < 80) {
                progressBar.classList.add('fill-medium');
            } else {
                progressBar.classList.add('fill-high');
            }
        }

        function updateSystemStatus(status) {
            const indicators = document.querySelectorAll('.status-indicator');
            const statusClass = status === 'healthy' ? 'status-healthy' :
                              status === 'warning' ? 'status-warning' : 'status-critical';

            indicators.forEach(indicator => {
                indicator.className = `status-indicator ${statusClass}`;
            });
        }

        function refreshDashboard() {
            const data = generateMockData();

            // Update system resources
            document.getElementById('cpu-value').textContent = data.system.cpu.toFixed(1) + '%';
            document.getElementById('memory-value').textContent = data.system.memory.toFixed(1) + '%';
            document.getElementById('disk-value').textContent = data.system.disk.toFixed(1) + '%';
            document.getElementById('load-value').textContent = data.system.loadAvg.join(', ');

            updateProgressBar('cpu-progress', data.system.cpu);
            updateProgressBar('memory-progress', data.system.memory);
            updateProgressBar('disk-progress', data.system.disk);

            // Update servers
            Object.entries(data.servers).forEach(([port, status]) => {
                const element = document.getElementById(`server-${port}`);
                element.textContent = status === 'healthy' ? '‚úÖ Healthy' : '‚ùå Down';
            });

            // Update performance
            document.getElementById('response-time').textContent = data.performance.responseTime + ' ms';
            document.getElementById('error-rate').textContent = data.performance.errorRate + '%';
            document.getElementById('requests-per-min').textContent = data.performance.requestsPerMin;

            // Update security
            document.getElementById('security-events').textContent = data.security.events;
            document.getElementById('failed-logins').textContent = data.security.failedLogins;
            document.getElementById('blocked-ips').textContent = data.security.blockedIps;

            // Update agents
            const agentsGrid = document.getElementById('agents-grid');
            agentsGrid.innerHTML = '';
            data.agents.forEach(agent => {
                const agentCard = document.createElement('div');
                agentCard.className = `agent-card ${agent.status === 'warning' ? 'warning' : ''}`;
                agentCard.innerHTML = `
                    <div class="agent-name">${agent.name}</div>
                    <div class="agent-status">${agent.status === 'running' ? '‚úÖ' : '‚ö†Ô∏è'} ${agent.status} (${agent.uptime})</div>
                `;
                agentsGrid.appendChild(agentCard);
            });

            // Determine overall status
            const hasWarnings = data.agents.some(a => a.status !== 'running') ||
                              Object.values(data.servers).some(s => s !== 'healthy') ||
                              data.system.cpu > 80 || data.system.memory > 85;

            const hasCritical = data.system.cpu > 90 || data.system.memory > 95 ||
                              Object.values(data.servers).filter(s => s !== 'healthy').length > 1;

            const overallStatus = hasCritical ? 'critical' : hasWarnings ? 'warning' : 'healthy';
            updateSystemStatus(overallStatus);

            // Update timestamp
            document.getElementById('last-updated').textContent = new Date().toLocaleString();
        }

        // Initial load and auto-refresh
        refreshDashboard();
        setInterval(refreshDashboard, 30000); // Refresh every 30 seconds

        // Add some interactivity
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('click', function() {
                this.style.transform = 'scale(1.02)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 150);
            });
        });
    </script>
</body>
</html>